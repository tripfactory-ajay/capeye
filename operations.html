<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operations - Capeye Auto Capital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background: #f1f5f9; }
        .glass-panel { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); }
        .dept-card { transition: all 0.3s ease; }
        .dept-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="bg-slate-100 min-h-screen">
    
    <!-- Auth Check -->
    <script>
        (function() {
            const session = localStorage.getItem('capeye_session');
            if (!session) {
                sessionStorage.setItem('redirect_after_login', window.location.href);
                window.location.replace('./login.html');
                return;
            }
        })();
    </script>

    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <img src="./autocapital-logo.png" alt="Auto Capital" class="h-10 w-auto object-contain" onerror="this.style.display='none'">
                    <span class="ml-3 text-xl font-bold text-slate-800">Operations Centre</span>
                </div>
                <div class="hidden md:flex items-center space-x-1">
                    <a href="./index.html" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-lg transition">Dashboard</a>
                    <a href="./operations.html" class="px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg border-b-2 border-blue-600">Operations</a>
                    <a href="./inventory.html" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-lg transition">Inventory</a>
                    <a href="./workflow.html" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-lg transition">Workflow</a>
                    <a href="./analytics.html" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-lg transition">Analytics</a>
                    <button onclick="logout()" class="ml-4 px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition">
                        <i class="fas fa-sign-out-alt mr-2"></i>Logout
                    </button>
                </div>
                <!-- Mobile menu button -->
                <div class="md:hidden flex items-center">
                    <button onclick="toggleMobileMenu()" class="text-slate-600 hover:text-slate-900 p-2">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t border-slate-200">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="./index.html" class="block px-3 py-2 text-base font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-md">Dashboard</a>
                <a href="./operations.html" class="block px-3 py-2 text-base font-medium text-blue-600 bg-blue-50 rounded-md">Operations</a>
                <a href="./inventory.html" class="block px-3 py-2 text-base font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-md">Inventory</a>
                <a href="./workflow.html" class="block px-3 py-2 text-base font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-md">Workflow</a>
                <a href="./analytics.html" class="block px-3 py-2 text-base font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-md">Analytics</a>
                <button onclick="logout()" class="w-full text-left px-3 py-2 text-base font-medium text-red-600 hover:bg-red-50 rounded-md">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <h1 class="text-3xl font-bold text-slate-900 mb-8">Operations Centre</h1>

        <!-- Department Status Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="dept-card glass-panel rounded-xl p-6 shadow-sm border-l-4 border-blue-500">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold text-slate-900">Sales</h3>
                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-600">Staff</span>
                        <span class="font-medium">3</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-600">Tasks</span>
                        <span class="font-medium text-blue-600">12 pending</span>
                    </div>
                </div>
            </div>

            <div class="dept-card glass-panel rounded-xl p-6 shadow-sm border-l-4 border-orange-500">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold text-slate-900">Workshop</h3>
                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-600">Staff</span>
                        <span class="font-medium">5</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-600">In Progress</span>
                        <span class="font-medium text-orange-600">8 vehicles</span>
                    </div>
                </div>
            </div>

            <div class="dept-card glass-panel rounded-xl p-6 shadow-sm border-l-4 border-purple-500">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold text-slate-900">Valeting</h3>
                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">Busy</span>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-600">Staff</span>
                        <span class="font-medium">2</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-600">Queue</span>
                        <span class="font-medium text-purple-600">5 vehicles</span>
                    </div>
                </div>
            </div>

            <div class="dept-card glass-panel rounded-xl p-6 shadow-sm border-l-4 border-green-500">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold text-slate-900">Accounts</h3>
                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-600">Staff</span>
                        <span class="font-medium">2</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-600">Invoices</span>
                        <span class="font-medium text-green-600">3 pending</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Today's Schedule -->
        <div class="glass-panel rounded-xl p-6 shadow-sm mb-8">
            <h2 class="text-lg font-semibold text-slate-900 mb-4">Today's Schedule</h2>
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="bg-slate-50 text-slate-600 text-sm uppercase">
                        <tr>
                            <th class="px-4 py-3 rounded-tl-lg">Time</th>
                            <th class="px-4 py-3">Vehicle</th>
                            <th class="px-4 py-3">Task</th>
                            <th class="px-4 py-3">Assigned To</th>
                            <th class="px-4 py-3 rounded-tr-lg">Status</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-200" id="scheduleTable">
                        <tr>
                            <td class="px-4 py-3 text-sm">09:00</td>
                            <td class="px-4 py-3 font-medium">Ford Transit (R0218)</td>
                            <td class="px-4 py-3 text-sm">Intake Inspection</td>
                            <td class="px-4 py-3 text-sm">Ibrahim Ata</td>
                            <td class="px-4 py-3"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Complete</span></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-3 text-sm">10:30</td>
                            <td class="px-4 py-3 font-medium">VW Crafter (R0461)</td>
                            <td class="px-4 py-3 text-sm">Mechanical Check</td>
                            <td class="px-4 py-3 text-sm">Ali Amood</td>
                            <td class="px-4 py-3"><span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">In Progress</span></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-3 text-sm">14:00</td>
                            <td class="px-4 py-3 font-medium">Mercedes Sprinter</td>
                            <td class="px-4 py-3 text-sm">Valeting</td>
                            <td class="px-4 py-3 text-sm">Marcin Kiljan</td>
                            <td class="px-4 py-3"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">Pending</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Staff on Duty -->
        <div class="glass-panel rounded-xl p-6 shadow-sm">
            <h2 class="text-lg font-semibold text-slate-900 mb-4">Staff on Duty</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4" id="staffGrid">
                <!-- Staff injected by JS -->
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadStaffOnDuty();
        });

        const staff = [
            { name: 'Keith Hardy', role: 'General Manager', dept: 'Management', status: 'active' },
            { name: 'Ibrahim Ata', role: 'Sales Manager', dept: 'Sales', status: 'active' },
            { name: 'Ali Amood', role: 'Workshop Lead', dept: 'Workshop', status: 'active' },
            { name: 'Morteza Rahamian', role: 'Technician', dept: 'Workshop', status: 'busy' },
            { name: 'Marcin Kiljan', role: 'Technician/Valeting', dept: 'Workshop', status: 'active' },
            { name: 'Sia Vajihi', role: 'Technician', dept: 'Workshop', status: 'off' },
            { name: 'Iman Zarien', role: 'Technician', dept: 'Workshop', status: 'active' },
            { name: 'Stash', role: 'Bodyshop', dept: 'Bodyshop', status: 'active' }
        ];

        function loadStaffOnDuty() {
            const container = document.getElementById('staffGrid');
            const activeStaff = staff.filter(s => s.status !== 'off');
            
            container.innerHTML = activeStaff.map(s => `
                <div class="text-center p-3 bg-slate-50 rounded-lg border border-slate-200">
                    <div class="w-12 h-12 bg-${getDeptColor(s.dept)}-100 rounded-full flex items-center justify-center mx-auto mb-2">
                        <span class="text-${getDeptColor(s.dept)}-600 font-bold">${s.name.split(' ').map(n => n[0]).join('')}</span>
                    </div>
                    <p class="text-sm font-medium text-slate-900 truncate">${s.name}</p>
                    <p class="text-xs text-slate-500">${s.role}</p>
                    <span class="inline-block w-2 h-2 rounded-full ${s.status === 'active' ? 'bg-green-500' : 'bg-orange-500'} mt-2"></span>
                </div>
            `).join('');
        }

        function getDeptColor(dept) {
            const colors = {
                'Management': 'purple',
                'Sales': 'blue',
                'Workshop': 'orange',
                'Bodyshop': 'red',
                'Valeting': 'green',
                'Accounts': 'slate'
            };
            return colors[dept] || 'gray';
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        function logout() {
            localStorage.removeItem('capeye_session');
            window.location.replace('./login.html');
        }
    </script>
</body>
</html>
